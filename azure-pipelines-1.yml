trigger:
- main

pool:
  name: Azure Pipelines
  demands: 
    unity

steps:

- task: Cake@2
  inputs:
    script: 'build.cake'
    target: 'Build-Android'
    verbosity: 'Verbose'
- task: PublishPipelineArtifact@1
  inputs:
    targetPath: '$(Pipeline.Workspace)'
    artifact: 'testgame'
    publishLocation: 'pipeline'
- task: AzureFileCopy@4
  inputs:
    azureSubscription: 'Azure subscription 1(9d46a63b-0469-40f9-a066-8e537f2d6aff)'
    Destination: 'AzureBlob'
    storage: 'unitybuildhub'
    ContainerName: 'Game_builds_android'